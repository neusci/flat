from tensorflow.contrib.learn.python.learn.datasets.mnist import *
m=read_data_sets('../MNIST-data/', reshape=False)
x,y=m.train.next_batch(10)
shape(x) # (10, 28, 28, 1)
shape(y) # (10,)
print(y)
# array([1, 3, 6, 9, 8, 3, 2, 9, 0, 1], dtype=uint8)

mat=rand(28,28)
x_=zeros([28,28])

for i in range(28):
    for j in range(28):
        x_[i,j] = x[0,i,j,0]


for i,j in muloop([28,28]):
    print('%.1f'%x_[i,j], end='')
    if j>=27: print()

#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.51.00.60.10.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.81.01.00.50.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.81.01.00.80.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.20.91.01.00.50.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.41.01.01.00.40.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.81.01.01.00.30.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.51.01.00.90.50.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.81.01.00.40.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.10.81.01.00.70.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.31.01.01.00.40.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.10.71.01.01.00.30.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.21.01.01.01.00.40.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.20.91.01.01.00.40.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.41.01.01.00.70.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.61.01.01.00.20.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.30.91.01.00.80.00.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.81.01.01.00.40.00.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.91.01.00.70.00.00.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.41.01.00.80.10.00.00.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.41.00.60.10.00.00.00.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.0
#  0.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.0

z=dot(x_,mat)
shape(z)

for i,j in muloop([28,28]):
    print('%.2f'%z[i,j], end='')
    if j>=27: print()

'''
0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00
0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00
0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00
0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00
1.261.690.321.870.990.901.231.541.250.721.300.441.230.491.161.971.220.931.311.441.691.171.790.671.881.401.521.14
1.802.500.572.591.451.521.872.041.961.141.720.801.650.751.612.631.691.611.852.042.111.572.501.012.471.771.981.55
2.012.740.662.741.631.792.032.162.211.241.780.931.670.811.632.741.751.851.902.202.121.632.711.082.511.812.101.66
1.932.580.502.221.521.912.052.432.601.301.360.771.531.211.512.421.931.881.662.091.811.622.681.172.281.881.931.68
2.112.800.602.511.682.032.132.432.601.391.580.901.631.151.642.641.931.981.802.271.991.702.831.232.481.932.091.76
2.373.090.742.841.922.272.232.432.661.611.841.091.741.181.872.911.952.131.962.552.211.833.041.392.762.002.241.86
2.202.880.622.571.762.132.162.492.671.521.640.931.681.261.762.731.992.001.842.402.081.782.921.342.622.012.131.81
1.692.370.532.511.351.381.781.981.831.081.690.731.640.711.602.581.651.481.831.952.111.532.390.972.451.761.911.49
2.042.780.692.811.671.752.022.142.141.281.810.931.740.831.682.811.771.831.992.282.211.682.681.122.581.872.091.65
2.072.840.772.961.721.621.972.071.951.361.860.931.920.851.802.991.801.722.192.452.441.812.591.212.752.012.031.62
2.303.130.953.261.991.592.062.151.941.521.911.012.250.971.883.311.981.852.632.862.802.122.631.392.912.322.061.65
2.663.471.143.562.361.772.222.302.171.772.101.182.541.161.983.572.152.183.033.273.122.442.891.623.052.532.251.75
2.623.431.123.512.321.762.172.262.111.732.051.162.481.131.953.512.102.132.953.223.052.382.841.583.012.492.211.72
2.462.991.043.212.221.391.751.921.661.702.031.042.391.081.843.211.831.782.863.063.062.322.511.562.812.322.031.47
2.532.711.052.902.321.401.341.511.391.751.961.092.091.051.612.791.401.642.562.992.852.172.291.572.421.981.891.24
2.812.581.192.672.601.491.211.451.392.142.181.412.221.211.692.631.401.812.843.192.962.232.321.762.331.912.111.18
2.952.591.382.432.661.561.371.721.412.472.221.832.521.281.972.751.791.893.303.413.012.122.241.792.492.152.421.33
2.442.041.271.812.251.221.111.331.142.201.761.672.221.161.612.141.561.682.992.882.451.781.681.571.891.751.920.98
1.971.621.031.431.911.021.171.491.101.771.521.382.231.221.481.891.781.372.792.422.181.701.611.491.691.702.140.98
1.100.810.550.621.010.730.851.180.721.111.040.971.410.751.151.151.340.691.681.321.230.851.090.871.231.091.740.80
0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00
0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00
0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00
0.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.000.00
'''

z_=dot(mat,z)

for i,j in muloop([28,28]):
    print('%.3f'%z_[i,j], end=' ')
    if j>=27: print()

'''
17.602 21.097 7.045 21.024 15.351 12.288 13.740 15.191 14.305 12.500 14.163 8.511 15.883 8.119 13.372 21.759 13.849 13.809 18.916 20.748 19.513 15.014 19.041 10.823 19.566 15.709 15.918 11.508
22.900 26.298 9.161 26.200 20.019 15.643 17.119 19.382 17.872 16.621 18.743 11.510 20.663 10.592 17.441 27.481 17.786 17.450 24.725 26.745 25.290 19.183 24.344 14.148 25.012 20.011 21.297 14.678
26.272 30.951 10.303 30.372 22.704 18.845 20.948 23.587 22.196 18.910 21.417 13.231 23.733 12.376 20.271 32.032 21.379 20.920 28.247 30.507 28.647 21.960 28.964 16.076 29.169 23.347 24.954 17.64
22.862 27.352 8.740 26.694 19.595 16.802 18.618 21.008 19.999 16.360 18.514 11.257 20.409 10.900 17.737 28.127 18.774 18.391 24.145 26.485 24.802 19.127 25.643 13.943 25.712 20.497 21.604 15.679
21.307 25.791 7.981 25.506 18.219 15.688 17.081 19.080 18.481 14.883 17.276 10.060 18.396 9.751 16.219 26.274 16.698 17.039 21.728 24.538 23.071 17.765 23.955 12.757 23.944 18.764 19.506 14.465
20.859 24.615 8.331 24.480 18.167 14.369 16.279 18.287 16.981 14.993 16.977 10.290 19.134 9.762 15.992 25.653 16.762 16.360 22.836 24.549 23.267 17.804 22.586 12.867 23.180 18.738 19.335 13.689
19.996 23.106 8.022 22.866 17.499 13.800 14.982 16.803 15.822 14.481 16.080 9.975 17.839 9.316 14.996 23.839 15.393 15.472 21.402 23.334 21.826 16.746 21.196 12.349 21.565 17.337 18.191 12.709
19.720 23.477 7.447 23.088 16.955 14.514 15.589 17.417 17.017 13.866 15.908 9.488 16.956 9.123 14.797 23.797 15.323 15.842 20.122 22.576 21.082 16.336 21.988 11.869 21.648 17.042 18.116 13.168
21.975 25.471 8.490 24.804 18.976 15.804 17.181 19.606 18.548 15.951 17.766 11.045 19.563 10.556 16.812 26.271 17.675 17.350 23.285 25.356 23.692 18.234 24.092 13.516 24.062 19.293 20.794 14.619
21.671 25.347 8.723 24.982 18.838 15.233 17.204 19.360 17.819 15.739 17.834 11.178 20.060 10.177 16.911 26.546 17.856 17.072 23.927 25.363 23.927 18.195 23.637 13.367 24.144 19.425 20.901 14.486
22.483 27.472 8.527 27.354 19.352 16.356 18.151 20.138 19.410 15.520 18.195 10.451 19.737 10.294 17.030 28.045 17.754 18.033 23.270 26.104 24.662 19.091 25.291 13.539 25.324 20.046 20.542 15.233
25.911 29.553 10.200 28.973 22.526 18.068 19.439 22.240 20.780 18.959 20.913 13.084 23.048 12.290 19.648 30.636 20.245 19.918 27.576 30.037 28.092 21.461 27.642 16.006 28.022 22.507 24.099 16.70
19.513 22.100 7.935 22.214 17.165 12.777 13.798 15.548 14.400 14.074 15.776 9.699 17.288 8.686 14.287 22.960 14.297 14.648 20.929 22.782 21.514 16.255 20.024 11.882 20.637 16.615 17.339 11.882
22.947 26.883 8.940 26.713 19.875 16.169 17.835 20.156 18.836 16.459 18.880 11.352 20.596 10.649 17.664 27.963 18.203 17.875 24.485 26.666 25.280 19.252 25.127 14.057 25.535 20.271 21.586 15.205
22.539 25.905 8.976 25.225 19.639 15.694 17.063 19.381 18.295 16.391 17.841 11.331 20.101 10.750 16.792 26.620 17.707 17.641 24.131 26.206 24.305 18.762 23.934 13.874 24.057 19.643 20.650 14.450
25.280 30.042 10.005 29.518 21.978 17.916 19.771 22.023 21.035 17.951 20.035 12.310 22.496 11.835 18.885 30.685 19.931 20.111 26.843 29.511 27.459 21.305 27.396 15.437 27.546 22.309 22.917 16.53
17.840 21.636 6.640 21.473 15.288 13.138 14.852 16.773 15.918 12.470 14.806 8.486 16.104 8.468 13.967 22.410 14.846 14.432 18.867 20.647 19.759 15.253 20.595 10.891 20.501 16.224 17.247 12.500
21.774 26.091 8.314 25.586 18.684 16.107 17.903 20.155 19.095 15.546 17.879 10.785 19.584 10.362 17.090 26.958 18.039 17.505 23.087 25.206 23.735 18.260 24.662 13.335 24.721 19.565 20.979 15.085
21.878 26.256 8.395 25.964 18.823 15.766 17.585 19.791 18.689 15.536 17.841 10.574 19.606 10.261 16.945 27.141 17.706 17.357 23.175 25.486 24.096 18.498 24.409 13.356 24.744 19.676 20.466 14.861
20.068 25.122 7.280 25.025 17.062 15.197 17.156 19.142 18.456 13.654 16.589 9.134 17.759 9.342 15.709 25.760 16.610 16.427 20.622 23.194 22.185 17.205 23.670 12.068 23.507 18.380 19.101 14.383
19.041 23.165 6.821 22.464 16.057 14.717 16.135 18.377 17.816 13.403 15.539 9.093 16.587 9.211 14.955 23.643 15.930 15.624 19.355 21.715 20.398 15.838 22.310 11.484 21.876 17.157 18.392 13.664
20.077 24.620 7.353 24.170 17.020 15.209 17.095 19.300 18.504 14.059 16.569 9.584 17.895 9.558 15.858 25.334 16.910 16.475 20.924 23.120 21.945 16.951 23.470 12.128 23.286 18.317 19.420 14.369
27.546 33.194 10.578 32.799 23.694 20.087 22.345 24.981 23.741 19.484 22.503 13.382 24.609 12.852 21.338 34.197 22.318 22.031 29.074 31.999 30.177 23.205 30.911 16.768 31.153 24.664 25.893 18.80
28.740 35.319 10.807 34.924 24.572 21.346 24.052 26.835 25.705 20.045 23.544 13.639 25.688 13.464 22.411 36.287 23.719 23.402 30.163 33.358 31.603 24.431 33.013 17.403 33.047 26.106 27.162 20.11
23.949 28.892 9.157 28.472 20.589 17.445 19.455 21.834 20.751 16.842 19.415 11.533 21.370 11.216 18.406 29.709 19.453 19.189 25.224 27.814 26.196 20.207 26.884 14.531 26.975 21.517 22.466 16.368
25.046 30.153 9.528 29.849 21.536 18.278 20.658 23.361 21.835 17.759 20.747 12.187 22.866 11.942 19.798 31.430 20.943 19.960 26.833 29.176 27.805 21.347 28.513 15.428 28.804 22.869 24.311 17.450
24.711 29.857 9.513 29.737 21.270 17.896 20.164 22.559 21.132 17.426 20.490 12.028 22.378 11.423 19.393 31.046 20.219 19.619 26.365 28.803 27.429 20.937 27.875 15.059 28.332 22.350 23.606 17.018
15.273 18.342 5.731 17.954 13.049 11.425 12.624 14.214 13.657 10.836 12.536 7.497 13.549 7.249 11.899 18.828 12.585 12.429 15.974 17.548 16.516 12.752 17.457 9.272 17.276 13.616 14.667 10.622
'''

max(flatten(z_)) # 36.286521499009098
